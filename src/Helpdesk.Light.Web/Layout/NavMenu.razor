@inject ClientSession Session

<nav class="nav-wrap" aria-label="Main navigation">
    <header class="nav-head">
        <p class="nav-kicker">Workspace</p>
        <h2 class="nav-title">Control Center</h2>
        <p class="nav-subtitle">Move between dashboards, ticketing, and tenant operations.</p>
        @if (Session.IsAuthenticated)
        {
            <p class="nav-chip">@Session.Role Â· @Session.Email</p>
        }
    </header>

    <div class="nav-items">
        <NavLink href="/" class="nav-item" @onclick="HandleNavigate" Match="NavLinkMatch.All">
            <span class="nav-icon">DB</span>
            <span class="nav-copy">
                <span class="nav-label">Dashboard</span>
                <small>Overview and queue health</small>
            </span>
            <span class="nav-arrow" aria-hidden="true">></span>
        </NavLink>

        <NavLink href="/tickets" class="nav-item" @onclick="HandleNavigate">
            <span class="nav-icon">TK</span>
            <span class="nav-copy">
                <span class="nav-label">Tickets</span>
                <small>Portal and technician workspace</small>
            </span>
            <span class="nav-arrow" aria-hidden="true">></span>
        </NavLink>

        <NavLink href="/record-ticket" class="nav-item" @onclick="HandleNavigate">
            <span class="nav-icon">RT</span>
            <span class="nav-copy">
                <span class="nav-label">Record Ticket</span>
                <small>Public ticket submission form</small>
            </span>
            <span class="nav-arrow" aria-hidden="true">></span>
        </NavLink>

        <NavLink href="/customers" class="nav-item" @onclick="HandleNavigate">
            <span class="nav-icon">CU</span>
            <span class="nav-copy">
                <span class="nav-label">Customers</span>
                <small>Tenant and domain mappings</small>
            </span>
            <span class="nav-arrow" aria-hidden="true">></span>
        </NavLink>

        <NavLink href="/resolver-groups" class="nav-item" @onclick="HandleNavigate">
            <span class="nav-icon">RG</span>
            <span class="nav-copy">
                <span class="nav-label">Resolver Groups</span>
                <small>Resolver routing groups and assignment</small>
            </span>
            <span class="nav-arrow" aria-hidden="true">></span>
        </NavLink>

        <NavLink href="/ticket-categories" class="nav-item" @onclick="HandleNavigate">
            <span class="nav-icon">TC</span>
            <span class="nav-copy">
                <span class="nav-label">Ticket Categories</span>
                <small>Category taxonomy and resolver mapping</small>
            </span>
            <span class="nav-arrow" aria-hidden="true">></span>
        </NavLink>

        <NavLink href="/email-lab" class="nav-item" @onclick="HandleNavigate">
            <span class="nav-icon">EM</span>
            <span class="nav-copy">
                <span class="nav-label">Email Lab</span>
                <small>Inbound and outbound simulation</small>
            </span>
            <span class="nav-arrow" aria-hidden="true">></span>
        </NavLink>

        <NavLink href="/knowledge" class="nav-item" @onclick="HandleNavigate">
            <span class="nav-icon">KB</span>
            <span class="nav-copy">
                <span class="nav-label">Knowledge</span>
                <small>Drafts, publish, and archive lifecycle</small>
            </span>
            <span class="nav-arrow" aria-hidden="true">></span>
        </NavLink>

        <NavLink href="/settings" class="nav-item" @onclick="HandleNavigate">
            <span class="nav-icon">ST</span>
            <span class="nav-copy">
                <span class="nav-label">Settings</span>
                <small>AI and outbound email configuration</small>
            </span>
            <span class="nav-arrow" aria-hidden="true">></span>
        </NavLink>

        <NavLink href="/login" class="nav-item" @onclick="HandleNavigate">
            <span class="nav-icon">AU</span>
            <span class="nav-copy">
                <span class="nav-label">Authentication</span>
                <small>Role-based access</small>
            </span>
            <span class="nav-arrow" aria-hidden="true">></span>
        </NavLink>
    </div>

    <footer class="nav-foot">
        <p>Tip: use Email Lab to simulate helpdesk thread continuity.</p>
    </footer>
</nav>

@code {
    [Parameter]
    public EventCallback OnNavigate { get; set; }

    private async Task HandleNavigate(MouseEventArgs _)
    {
        if (OnNavigate.HasDelegate)
        {
            await OnNavigate.InvokeAsync();
        }
    }
}
